package main

import "fmt"

templ layout(contents templ.Component) {
    <!DOCTYPE html>
    <html data-theme="cupcake"> // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ãƒ¼ãƒ
        <head>
            <meta charset="UTF-8"/>
            <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
            <script src="https://unpkg.com/htmx.org@1.9.12"></script>
            <link href="https://cdn.jsdelivr.net/npm/daisyui@4.10.2/dist/full.min.css" rel="stylesheet" type="text/css"/>
            <script src="https://cdn.tailwindcss.com"></script>
            <title>Go + Templ + daisyUI V2</title>
        </head>
        <body class="bg-base-200 min-h-screen">
            <div class="navbar bg-base-100 shadow-md mb-8">
                <div class="flex-1">
                    <a class="btn btn-ghost text-xl">Htmx Ã— Go</a>
                </div>
                <div class="flex-none">
                    <select class="select select-bordered select-sm mr-4" data-choose-theme>
                        <option value="cupcake">ğŸ§ Cupcake</option>
                        <option value="dark">ğŸŒ™ Dark</option>
                        <option value="retro">ğŸ“» Retro</option>
                        <option value="cyberpunk">ğŸ¤– Cyberpunk</option>
                    </select>
                </div>
            </div>

            <div class="max-w-md mx-auto">
                @contents
            </div>

            <script src="https://cdn.jsdelivr.net/npm/theme-change@2.0.2/index.js"></script>
        </body>
    </html>
}

templ counter(count int) {
    <div id="counter-card" class="card bg-base-100 shadow-2xl items-center p-10 text-center relative">

        if count > 0 {
            <div class="badge badge-accent absolute -top-2 -right-2 p-4 animate-bounce">Counted!</div>
        }

        <h1 class="text-3xl font-black mb-6 italic text-primary">Power of daisyUI</h1>

        <div class="stats shadow bg-primary text-primary-content mb-8 w-full">
          <div class="stat">
            <div class="stat-title text-primary-content opacity-70">ç¾åœ¨ã®æ•°å€¤</div>
            <div class="stat-value text-5xl">{ fmt.Sprint(count) }</div>
            <div class="stat-desc text-primary-content">ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ç›´æ¥è¿”å´</div>
          </div>
        </div>

        <div class="card-actions w-full">
            <button
                hx-post="/increment"
                hx-target="#counter-card"
                hx-swap="outerHTML"
                class="btn btn-primary btn-block text-lg"
            >
                <span class="htmx-indicator loading loading-spinner loading-md"></span>
                <span>ï¼‹1 è¿½åŠ ã™ã‚‹</span>
            </button>
        </div>

        if count > 0 {
            <div id="toast-success" class="toast toast-end">
                <div class="alert alert-success">
                    <span>ã‚«ã‚¦ãƒ³ãƒˆã‚’ { fmt.Sprint(count) } ã«æ›´æ–°ã—ã¾ã—ãŸï¼</span>
                </div>
                <script>setTimeout(() => document.getElementById('toast-success').remove(), 3000)</script>
            </div>
        }
    </div>
}
